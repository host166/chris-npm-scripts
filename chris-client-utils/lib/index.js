import oStatic from "./static.js";export function setData(e="",t="",o=oStatic){if(!e||"string"!=typeof e)return!1;var n=/[\.]+/gi.test(e)?e.split("."):[e],i=o;for(let e=0;e<n.length;e++){let o=n[e];e==n.length-1?i[o]=t:i=i[o]}}export function oAdapt(e,t="transverse"){var o={w:750,h:1334,px:20,fn:function(){}};for(let t in e)o[t]=e[t];var n=()=>"transverse"===t?oWinSize().width/o.w:(o.w/o.h<oWinSize().width/oWinSize().height?o.w/o.h*oWinSize().height:oWinSize().width)/o.w;return orientationChange(name,()=>{o.fn(n()*o.px)}),o.fn(n()*o.px),n}export function autoAdapt(e,t="transverse"){return oAdapt({px:e},t)}export function query(e){var t=document.querySelectorAll(e);return t.length?1==t.length?document.querySelector(e):t:{}}export function orientationChange(e,t){var o;(oStatic.orientationObject[e]=t,void 0===window.onorientationchange)?window.onresize=function(){o&&(clearTimeout(o),o=null),o=setTimeout(function(){oStatic.orientationObject[e]()},200)}:window.onorientationchange=function(){if(0==window.orientation||180==window.orientation||90==window.orientation||-90==window.orientation)for(var t in obj)oStatic.orientationObject[e](window.orientation)}}export function oWinSize(){var e=0,t=0;return window.innerWidth?e=window.innerWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),window.innerHeight?t=window.innerHeight:document.body&&document.body.clientHeight&&(t=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(t=document.documentElement.clientHeight,e=document.documentElement.clientWidth),{width:e,height:t}}export function iDate(e=new Date,t=0,o="yyyy-mm-dd"){var n=new Date(new Date(e).setHours(0,0,0,0)+864e5*t),i=new Date(new Date(e).getTime()+864e5*t),r={y:n.getFullYear(),yyyy:`${n.getFullYear()}`,m:n.getMonth()+1,mm:(n.getMonth()+1<10?"0":"")+(n.getMonth()+1),d:n.getDate(),dd:(n.getDate()<10?"0":"")+n.getDate(),_h:i.getHours(),_hh:(i.getHours()<10?"0":"")+i.getHours(),_m:i.getMinutes(),_mm:(i.getMinutes()<10?"0":"")+i.getMinutes(),_s:i.getSeconds(),_ss:(i.getSeconds()<10?"0":"")+i.getSeconds(),time:i.getTime(),w:["周日","周一","周二","周三","周四","周五","周六"][n.getDay()],widx:n.getDay(),timeInit:n.getTime(),dayDes:"",string:"",month_day:"",oDate:n};switch(r.month_day=`${r.mm}月${r.dd}日`,(n-r.timeInit)/864e5){case 0:r.todayDes="今天";break;case 1:r.todayDes="明天";break;case 2:r.todayDes="后天";break;default:r.todayDes=r.w}if(r.lastDay=new Date(r.y,r.m,0).getDate(),o.match(/[\u4E00-\u9FA5\uF900-\uFA2D]/gi)){let e={"年":r.y,"月":r.mm,"日":r.dd};r.string=[],o.split("").map((t,o)=>{e[t]&&r.string.push(e[t]+t)}),r.string=r.string.join("")}else{r.string=[];var a=o.match(/[^a-z]/gi)[0];o.split(a).map(e=>{r.string.push(r[e])}),r.string=r.string.join(a)}return r}export function isLeapYear(e){var t=iDate(e).y;return 0==t%4&&(t%100!=0||t%400==0)}export function getDateDiff(e,t){var o=iDate(e).time,n=iDate(t).time;return Math.abs(o-n)/864e5}import isomorphicFetch from "isomorphic-fetch";import axios from "axios";import qs from "qs";import esPromise from "es6-promise";function checkStatus(e){if(e.status>=200&&e.status<300)return e;var t=e.statusText&&new Error(e.statusText);throw t.response=e,t}esPromise.polyfill();export function unifyAxios(e){if(!e&&"{}"==JSON.stringify(e)&&!e.url)return;let t={url:"",baseRUL:"",method:"GET",data:{},headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json; charset=utf-8","X-Requested-With":"XMLHttpRequest"},responseType:"json",timeout:2500,withCredentials:!1};e.method&&(e.method=e.method.toUpperCase()),"POST"==e.method||"PUT"==e.method?t.data=e.data:"GET"!=e.method&&"DELETE"!=e.method||(t.params=e.data),t.headers=Object.assign(t.headers,e.headers),delete e.data,delete e.header,t=Object.assign(t,e);const o=axios.create({});return o.interceptors.response.use(e=>e.data),o(t)}export function unifyFetch(e){if(!e&&"{}"==JSON.stringify(e)&&!e.url)return;let t={url:"",method:"GET",body:{},credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},mode:"cors",timeout:2500,responseType:"json"};if(e.method&&(e.method=e.method.toUpperCase()),"GET"==e.method&&e.body&&"{}"!=JSON.stringify(e.body)){var o=e.url+"?"+qs.stringify(e.body);delete t.body}else{o=e.url;t.body=e.body}t.headers=Object.assign(t.headers,e.headers),delete e.headers,delete e.body,delete(t=Object.assign(t,e)).url;let n=null,i=new Promise((e,t)=>{n=()=>t({code:504,message:"请求超时!"})}),r=setTimeout(()=>{n()},t.timeout),a=new Promise((e,n)=>{isomorphicFetch(o,t).then(e=>(clearTimeout(r),e)).then(o=>{switch(t.responseType){case"arraybuffer":e(o.arrayBuffer());break;case"blob":e(o.blob());break;case"text":e(o.text());break;default:e(o.json())}}).then(checkStatus).then(e=>({data:e})).catch(e=>n(e))});return Promise.race([a,i])}export default{orientationObject:{},oTimeLine:{},oMobile:/iphone|ipod|ipad|android|newsmy|blackberry|opera|mini|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())};export function deepCopy(e,t){t=t||{};for(var o in e)"object"==typeof e[o]?(e[o].constructor===Array?t[o]=[]:t[o]={},deepCopy(e[o],t[o])):t[o]=e[o];return t}export function easyCopy(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return console.log(t),deepCopy(e)}}export function verifyType(e){var t=Object.prototype.toString.call(e);return{isObj:"[object Object]"==t,isArray:"[object Array]"==t,isNULL:"[object Null]"==t,isDocument:"[object Document]"==t||"[object HTMLDocument]"}}export function getUrlQuery(e){for(var t=window.location.href,o=/([^\#\?\=\&]+)\=([^\#\?\=\&]*)/g,n={};null!=o.exec(t);)n[RegExp.$1]=RegExp.$2;return e?n[e]:n}export function local(e,t,o,n="localStorage"){return{get:()=>window[n].getItem(t)?JSON.parse(window[n].getItem(t)):"",set:()=>window[n].setItem(t,JSON.stringify(o)),remove:()=>window[n].getItem(t)?window[n].removeItem(t):"",clear:()=>window[n].clear()}[e]()}export function session(e,t,o,n="sessionStorage"){return this.local(e,t,o,n)}export function setcookie(e,t,o,n=30,i="/"){return{get(){var e,o=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(o))?unescape(e[2]):null},set(){var e=n,r=new Date,a="";r.setTime(r.getTime()+24*e*60*60*1e3),a=t+"="+escape(o)+";expires="+r.toGMTString(),i&&(a+=";path="+i),document.cookie=a},delete(){var e=new Date;e.setTime(e.getTime()-1);var o=this.getCookie(t);null!=o&&(document.cookie=t+"="+o+";expires="+e.toGMTString())}}[e]()}


const modules = {
    setData,
    oAdapt,
    autoAdapt,
    query,
    orientationChange,
    oWinSize,
    iDate,
    isLeapYear,
    getDateDiff,
    unifyAxios,
    unifyFetch,
    deepCopy,
    easyCopy,
    verifyType,
    getUrlQuery,
    local,
    session,
    setcookie
};


exports.default = modules;
module.exports = modules;